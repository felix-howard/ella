---
/**
 * Contact/demo request form that submits to Formspree.
 * Fields: name, email, firm size dropdown.
 * HTML5 validation with visual error states, emerald-themed styling.
 * Uses formspreeId from site config or prop override.
 */
import { siteConfig } from "@/config/site";

interface Props {
  formspreeId?: string;
}

const { formspreeId = siteConfig.formspreeId } = Astro.props;

const firmSizes = [
  { value: "", label: "Select firm size" },
  { value: "1-5", label: "1\u20135 employees" },
  { value: "6-20", label: "6\u201320 employees" },
  { value: "21-50", label: "21\u201350 employees" },
  { value: "51+", label: "51+ employees" },
];

/* Shared input classes for consistent styling */
const inputClasses =
  "mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm text-gray-900 placeholder-gray-400 transition-colors focus:border-primary-500 focus:ring-2 focus:ring-primary-200 focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 invalid:[&:not(:placeholder-shown)]:border-red-400 invalid:[&:not(:placeholder-shown)]:ring-red-100";
---

<form
  action={`https://formspree.io/f/${formspreeId}`}
  method="POST"
  class="mx-auto max-w-lg space-y-5"
>
  <!-- Name -->
  <div>
    <label for="contact-name" class="block text-sm font-medium text-gray-700">
      Full Name
    </label>
    <input
      type="text"
      id="contact-name"
      name="name"
      required
      autocomplete="name"
      placeholder="Jane Smith"
      class={inputClasses}
    />
  </div>

  <!-- Email -->
  <div>
    <label for="contact-email" class="block text-sm font-medium text-gray-700">
      Work Email
    </label>
    <input
      type="email"
      id="contact-email"
      name="email"
      required
      autocomplete="email"
      placeholder="jane@firm.com"
      class={inputClasses}
    />
  </div>

  <!-- Firm Size -->
  <div>
    <label for="contact-firm-size" class="block text-sm font-medium text-gray-700">
      Firm Size
    </label>
    <select
      id="contact-firm-size"
      name="firm_size"
      required
      class="mt-1 block w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm text-gray-900 transition-colors focus:border-primary-500 focus:ring-2 focus:ring-primary-200 focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500"
    >
      {firmSizes.map((size) => (
        <option value={size.value} disabled={size.value === ""} selected={size.value === ""}>
          {size.label}
        </option>
      ))}
    </select>
  </div>

  <!-- Submit -->
  <button
    type="submit"
    class="w-full rounded-full bg-primary-600 px-6 py-3 text-sm font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500"
  >
    Request a Demo
  </button>
</form>
