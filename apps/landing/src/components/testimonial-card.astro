---
/**
 * Testimonial card with quote, author name, role, and optional avatar.
 * Shows initials placeholder when no avatar provided.
 */
interface Props {
  quote: string;
  author: string;
  role: string;
  avatar?: string;
}

const { quote, author, role, avatar } = Astro.props;

/* Generate initials from author name for avatar fallback */
const initials = author
  .split(" ")
  .map((w) => w[0])
  .join("")
  .slice(0, 2)
  .toUpperCase();
---

<div class="rounded-xl bg-white p-8 shadow-sm ring-1 ring-gray-100">
  <!-- Quote with emerald accent border -->
  <blockquote class="border-l-4 border-primary-400 pl-4">
    <p class="text-sm italic leading-relaxed text-gray-700">
      &ldquo;{quote}&rdquo;
    </p>
  </blockquote>

  <!-- Author info -->
  <div class="mt-6 flex items-center gap-3">
    {avatar ? (
      <img
        src={avatar}
        alt={author}
        width="40"
        height="40"
        class="h-10 w-10 rounded-full object-cover"
        loading="lazy"
      />
    ) : (
      <div class="flex h-10 w-10 items-center justify-center rounded-full bg-primary-100 text-sm font-semibold text-primary-700">
        {initials}
      </div>
    )}
    <div>
      <p class="text-sm font-semibold text-gray-900">{author}</p>
      <p class="text-xs text-gray-500">{role}</p>
    </div>
  </div>
</div>
